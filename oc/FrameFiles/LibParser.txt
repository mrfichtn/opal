using Opal;
$(usings)
$(if nullable)#nullable $(nullable)$(endif)

$(namespace.start)
$(if !no.parser)public partial class Parser: ParserBase
{
	private readonly string? srcFile;
	
	public Parser(Scanner scanner)
		: base(scanner, _maxTerminal, _symbols, _actions)
	{}

	public Parser(string srcFile)
		: this(Scanner.FromFile(srcFile)) 
	{
		this.srcFile = srcFile;
	}

	public static Parser FromString(string text)
	{
		var scanner = new Scanner(text);
		return new Parser(scanner);
	}

	protected override uint Reduce(uint rule)
	{
		uint state = 0;

		switch (rule)
		{
$(productions)
		}
		return state;
	}

	#region Actions Table
$(actions)
	#endregion
$(parser.symbols)
}
$(endif)
$(scanner)
$(scanner.states)
$(endif)$(namespace.end)